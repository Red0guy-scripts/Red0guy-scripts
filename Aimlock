local fov = 60 -- FOV for aimlock
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local Cam = game.Workspace.CurrentCamera

local aimAssistEnabled = false
local autoLockEnabled = false
local teamCheckEnabled = false

-- FOV ring for aimlock
local aimLockFOVring = Drawing.new("Circle")
aimLockFOVring.Visible = false
aimLockFOVring.Thickness = 2
aimLockFOVring.Color = Color3.fromRGB(128, 0, 128) -- Purple color
aimLockFOVring.Filled = false
aimLockFOVring.Radius = fov
aimLockFOVring.Position = Cam.ViewportSize / 2

local function updateDrawings()
    aimLockFOVring.Position = Cam.ViewportSize / 2
end

-- Section 2: Button GUI elements
local AimAssistGui = Instance.new("ScreenGui")
AimAssistGui.ResetOnSpawn = false
AimAssistGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

local BackgroundFrame = Instance.new("Frame")
BackgroundFrame.Size = UDim2.new(0, 220, 0, 190)
BackgroundFrame.Position = UDim2.new(0, 10, 0, 10)
BackgroundFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
BackgroundFrame.BackgroundTransparency = 0
BackgroundFrame.BorderSizePixel = 0
BackgroundFrame.Parent = AimAssistGui

local AimlockButton = Instance.new("TextButton")
AimlockButton.Size = UDim2.new(0, 200, 0, 50)
AimlockButton.Position = UDim2.new(0, 10, 0, 10)
AimlockButton.Text = "Enable Aimlock"
AimlockButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
AimlockButton.Parent = BackgroundFrame

local AutoLockButton = Instance.new("TextButton")
AutoLockButton.Size = UDim2.new(0, 200, 0, 50)
AutoLockButton.Position = UDim2.new(0, 10, 0, 70)
AutoLockButton.Text = "Enable Auto-Lock"
AutoLockButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
AutoLockButton.Parent = BackgroundFrame

local TeamCheckButton = Instance.new("TextButton")
TeamCheckButton.Size = UDim2.new(0, 200, 0, 50)
TeamCheckButton.Position = UDim2.new(0, 10, 0, 130)
TeamCheckButton.Text = "Enable Team Check"
TeamCheckButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
TeamCheckButton.Parent = BackgroundFrame

-- Section 3: Minimize GUI logic
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 40, 0, 30)
MinimizeButton.Position = UDim2.new(0, 180, 0, 0)
MinimizeButton.Text = "-"
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
MinimizeButton.Parent = BackgroundFrame

local function minimizeGui()
    if BackgroundFrame.Size == UDim2.new(0, 220, 0, 190) then
        BackgroundFrame.Size = UDim2.new(0, 220, 0, 30)
        MinimizeButton.Text = "+"
        AimlockButton.Visible = false
        AutoLockButton.Visible = false
        TeamCheckButton.Visible = false
    else
        BackgroundFrame.Size = UDim2.new(0, 220, 0, 190)
        MinimizeButton.Text = "-"
        AimlockButton.Visible = true
        AutoLockButton.Visible = true
        TeamCheckButton.Visible = true
    end
end

MinimizeButton.MouseButton1Click:Connect(minimizeGui)

-- Section 4: Error message logic
local ErrorMessage = Instance.new("TextLabel")
ErrorMessage.Size = UDim2.new(0, 200, 0, 30)
ErrorMessage.Position = UDim2.new(0, 10, 0, 170)
ErrorMessage.BackgroundTransparency = 0.5
ErrorMessage.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
ErrorMessage.TextColor3 = Color3.fromRGB(255, 255, 255)
ErrorMessage.Visible = false
ErrorMessage.Parent = BackgroundFrame

local function showError(message)
    ErrorMessage.Text = message
    ErrorMessage.Visible = true
    ErrorMessage:TweenPosition(UDim2.new(0, 10, 0, 140), "Out", "Quad", 2, true)
    wait(2.5)
    ErrorMessage:TweenPosition(UDim2.new(0, 10, 0, 170), "In", "Quad", 0.5, true, function()
        ErrorMessage.Visible = false
    end)
end

-- Section 5: Toggle button functionality
local keyEntered = false -- Variable to track if the correct key has been entered

AimlockButton.MouseButton1Click:Connect(function()
    if not keyEntered then
        showError("Wrong code, try again")
        return
    end

    if autoLockEnabled then
        showError("Turn off Auto-Lock to use Aimlock")
        return
    end

    aimAssistEnabled = not aimAssistEnabled
    aimLockFOVring.Visible = aimAssistEnabled

    if aimAssistEnabled then
        AimlockButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Red when enabled
        AimlockButton.Text = "Disable Aimlock"
    else
        AimlockButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0) -- Green when disabled
        AimlockButton.Text = "Enable Aimlock"
    end
end)

AutoLockButton.MouseButton1Click:Connect(function()
    if not keyEntered then
        showError("Wrong code, try again")
        return
    end

    if aimAssistEnabled then
        showError("Turn off Aimlock to use Auto-Lock")
        return
    end

    autoLockEnabled = not autoLockEnabled

    if autoLockEnabled then
        AutoLockButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Red when enabled
        AutoLockButton.Text = "Disable Auto-Lock"
    else
        AutoLockButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0) -- Green when disabled
        AutoLockButton.Text = "Enable Auto-Lock"
    end
end)

TeamCheckButton.MouseButton1Click:Connect(function()
    if not keyEntered then
        showError("Wrong code, try again")
        return
    end

    teamCheckEnabled = not teamCheckEnabled

    if teamCheckEnabled then
        TeamCheckButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0) -- Red when enabled
        TeamCheckButton.Text = "Disable Team Check"
    else
        TeamCheckButton.BackgroundColor3 = Color3.fromRGB(0, 170, 0) -- Green when disabled
        TeamCheckButton.Text = "Enable Team Check"
    end
end)

-- Section 6: Aimlock functionality
RunService.RenderStepped:Connect(function()
    updateDrawings()

    if aimAssistEnabled then
        local closestPlayer = nil
        local lastDistance = math.huge
        local playerMousePos = Cam.ViewportSize / 2

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Players.LocalPlayer and (not teamCheckEnabled or player.Team ~= Players.LocalPlayer.Team) then
                local head = player.Character and player.Character:FindFirstChild("Head")
                if head then
                    local ePos, isVisible = Cam:WorldToViewportPoint(head.Position)
                    local distance = (Vector2.new(ePos.x, ePos.y) - playerMousePos).Magnitude

                    if isVisible and distance < fov and distance < lastDistance then
                        lastDistance = distance
                        closestPlayer = head
                    end
                end
            end
        end

        if closestPlayer then
            local lookVector = (closestPlayer.Position - Cam.CFrame.Position).unit
            Cam.CFrame = CFrame.new(Cam.CFrame.Position, Cam.CFrame.Position + lookVector)
        end
    elseif autoLockEnabled then
        local closestPlayer = nil
        local lastDistance = math.huge

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= Players.LocalPlayer and (not teamCheckEnabled or player.Team ~= Players.LocalPlayer.Team) then
                local head = player.Character and player.Character:FindFirstChild("Head")
                if head then
                    local ePos, isVisible = Cam:WorldToViewportPoint(head.Position)
                    local distance = (Vector2.new(ePos.x, ePos.y) - Cam.ViewportSize / 2).Magnitude

                    if isVisible and distance < lastDistance then
                        lastDistance = distance
                        closestPlayer =

 head
                    end
                end
            end
        end

        if closestPlayer then
            local lookVector = (closestPlayer.Position - Cam.CFrame.Position).unit
            Cam.CFrame = CFrame.new(Cam.CFrame.Position, Cam.CFrame.Position + lookVector)
        end
    end
end)

-- Section 7: Key System
local KeySystemFrame = Instance.new("Frame")
KeySystemFrame.Size = UDim2.new(0, 220, 0, 60)
KeySystemFrame.Position = UDim2.new(0, 240, 0, 10)
KeySystemFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
KeySystemFrame.Parent = AimAssistGui

local KeyTextBox = Instance.new("TextBox")
KeyTextBox.Size = UDim2.new(0, 200, 0, 30)
KeyTextBox.Position = UDim2.new(0, 10, 0, 10)
KeyTextBox.PlaceholderText = "https://discord.gg/tfFEFXjV"
KeyTextBox.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
KeyTextBox.TextColor3 = Color3.fromRGB(0, 0, 0)
KeyTextBox.Parent = KeySystemFrame

local function checkKey()
    local key = KeyTextBox.Text
    if key == "randomkeyeasy" then
        keyEntered = true
        KeySystemFrame:Destroy()
    else
        showError("Wrong code, try again")
    end
end

KeyTextBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        checkKey()
    end
end)